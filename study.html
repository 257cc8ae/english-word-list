<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>å˜èªå­¦ç¿’</title>
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet">

</head>

<body>
    <header class="site-header">
        <a href="index.html" class="back-link">&lt; ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</a>
    </header>
    <div class="container">
        <h1 id="wordCardTitle">å˜èªå­¦ç¿’</h1>

        <div id="card" class="card">
            <!-- å…±é€šéƒ¨åˆ† -->

            <span id="wordText" class="en-text" style="font-size: 24px; font-weight: bold;"></span>
            <button id="speakWordBtn" class="speak-button">ğŸ”Š ç™ºéŸ³</button>
            <br><br>

            <!-- çŠ¶æ…‹2ï¼šç­”ãˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div id="answerSection" style="display: none;">
                <p><strong>æ„å‘³ï¼š</strong><span id="meaningText"></span></p>

                <p><strong>ä¾‹æ–‡ï¼š</strong><button id="speakExampleBtn" class="speak-button">ğŸ”Š ä¾‹æ–‡ã‚’å†ç”Ÿ</button></p>
                <p id="exampleEn" class="en-text"></p>
                <p>è¨³ï¼š<span id="exampleJa"></span></p>
                <br>
                <button id="nextBtn" class="button">æ¬¡ã¸</button>
            </div>

            <!-- çŠ¶æ…‹1ï¼šç­”ãˆã‚’è¦‹ã‚‹ -->
            <div id="showAnswerSection">
                <button id="showAnswerBtn" class="button">ç­”ãˆã‚’è¦‹ã‚‹</button>
            </div>
        </div>
    </div>
    <p id="endMsg" style="display:none;">å…¨ã¦ã®å˜èªã‚’å­¦ç¿’ã—ã¾ã—ãŸï¼</p>
    <footer class="site-footer">
        <p>&copy; 2025 cyorinkairyutai</p>
      </footer>
      
    <script>
        const params = new URLSearchParams(window.location.search);
        const listName = decodeURIComponent(params.get("list_name"));

        const data = JSON.parse(localStorage.getItem("wordLists") || "{}");
        const wordList = data[listName];

        if (!wordList || wordList.length === 0) {
            document.body.innerHTML = "<p>æŒ‡å®šã•ã‚ŒãŸå˜èªå¸³ãŒå­˜åœ¨ã—ãªã„ã‹ã€å˜èªãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>";
            throw new Error("å˜èªå¸³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
        }

        let index = 0;
        const wordCardTitle = document.getElementById("wordCardTitle");
        const wordText = document.getElementById("wordText");
        const meaningText = document.getElementById("meaningText");
        const exampleEn = document.getElementById("exampleEn");
        const exampleJa = document.getElementById("exampleJa");
        const speakWordBtn = document.getElementById("speakWordBtn");
        const speakExampleBtn = document.getElementById("speakExampleBtn");
        const showAnswerBtn = document.getElementById("showAnswerBtn");
        const nextBtn = document.getElementById("nextBtn");
        const answerSection = document.getElementById("answerSection");
        const showAnswerSection = document.getElementById("showAnswerSection");
        const endMsg = document.getElementById("endMsg");
        wordCardTitle.textContent=listName;
        function showWord() {
            const item = wordList[index];
            wordText.textContent = item.word;
            meaningText.textContent = item.meaning;
            exampleEn.textContent = item.example_en;
            exampleJa.textContent = item.example_ja;
            answerSection.style.display = "none";
            showAnswerSection.style.display = "block";
        }

        showWord();

        speakWordBtn.addEventListener("click", () => {
            const word = wordList[index].word;
            const utterance = new SpeechSynthesisUtterance(word);
            utterance.lang = "en-US";
            speechSynthesis.speak(utterance);
        });

        speakExampleBtn.addEventListener("click", () => {
            const sentence = wordList[index].example_en;
            const utterance = new SpeechSynthesisUtterance(sentence);
            utterance.lang = "en-US";
            speechSynthesis.speak(utterance);
        });

        showAnswerBtn.addEventListener("click", () => {
            answerSection.style.display = "block";
            showAnswerSection.style.display = "none";
        });

        nextBtn.addEventListener("click", () => {
            index++;
            if (index >= wordList.length) {
                document.getElementById("card").style.display = "none";
                endMsg.style.display = "block";
            } else {
                showWord();
            }
        });
    </script>
</body>

</html>